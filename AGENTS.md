# AGENTS.md

Monorepo of Effect-based wrappers for AWS SDK v3 clients (pnpm@10.x, TypeScript ESM).

## Critical Rules

1. **NEVER edit** files in `packages/client-*/src/` -- auto-generated, will be overwritten.
2. **NEVER edit** files with `// ~~ Generated by projen` headers -- run `pnpm default` instead.

## Commands

```bash
pnpm eslint --fix             # Lint + format (uses dprint, not Prettier)
pnpm default                  # Synthesize Projen config (after editing .projenrc.ts)
```

### Single Test

```bash
pnpm vitest run --reporter verbose packages/dynamodb
pnpm vitest run --reporter verbose packages/lambda/test/LambdaHandler.test.ts
pnpm vitest run --reporter verbose -t "pattern" packages/client-s3
```

## Key Conventions

- `Array<T>` not `T[]` -- enforced by ESLint
- `import type` for type-only imports -- enforced by ESLint
- Internal imports use `.js` extension: `import { Foo } from "./Foo.js"`
- Destructure keys sorted alphabetically -- enforced by ESLint
- No `console.*` in `packages/*/src/` or `packages/*/test/`

## Further Reading

- [Code style & formatting](.github/agents/code-style.md) -- imports, naming, formatting rules
- [Effect patterns](.github/agents/effect-patterns.md) -- service layers, error handling, Effect.gen
- [Testing patterns](.github/agents/testing.md) -- Vitest, aws-sdk-client-mock, assertions
- [Code generation & Projen](.github/agents/codegen.md) -- adding AWS clients, Projen workflow
